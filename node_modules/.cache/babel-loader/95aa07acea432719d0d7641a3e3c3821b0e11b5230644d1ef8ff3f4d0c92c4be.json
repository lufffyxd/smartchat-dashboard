{"ast":null,"code":"import newsService from './newsService';\nimport webSearchService from './webSearch';\nclass AIService {\n  async processUserMessage(userMessage, windowData, conversationHistory = []) {\n    try {\n      // Handle automatic web search for questions\n      const searchResult = await this.handleAutomaticSearch(userMessage);\n      if (searchResult) {\n        return searchResult;\n      }\n\n      // Handle news requests\n      const newsResult = await this.handleNewsRequest(userMessage);\n      if (newsResult) {\n        return newsResult;\n      }\n\n      // Handle special window types\n      if (windowData.id === 'news') {\n        if (userMessage.toLowerCase().includes('latest') || userMessage.toLowerCase().includes('news') || userMessage.toLowerCase().includes('today') || userMessage.toLowerCase().includes('headlines')) {\n          const articles = await newsService.getTopHeadlines(windowData.newsTopic || 'technology');\n          return newsService.formatNewsForChat(articles);\n        } else {\n          const articles = await newsService.searchNews(userMessage);\n          return newsService.formatNewsForChat(articles);\n        }\n      }\n      if (windowData.id === 'workout') {\n        if (userMessage.toLowerCase().includes('plan') || userMessage.toLowerCase().includes('generate')) {\n          return this.getMockWorkoutPlan();\n        }\n      }\n\n      // For other messages, return a mock response (since we don't have Hugging Face key)\n      return this.getMockResponse(userMessage, windowData.title, conversationHistory);\n    } catch (error) {\n      console.error('AI Service Error:', error);\n      return `Sorry, I encountered an error: ${error.message}. Please try rephrasing your question.`;\n    }\n  }\n  async handleAutomaticSearch(userMessage) {\n    // Detect questions that likely need web search\n    const questionPatterns = [/^(what|who|where|when|why|how|which|can you|could you|tell me about|explain|define|meaning of)/i, /(latest|recent|current|today's|breaking|price of|cost of|population of|statistics)/i];\n    const isQuestion = questionPatterns.some(pattern => pattern.test(userMessage));\n    if (isQuestion) {\n      const cleanQuery = this.cleanSearchQuery(userMessage);\n      const results = await webSearchService.search(cleanQuery);\n      return webSearchService.formatSearchResults(results);\n    }\n    return null;\n  }\n  async handleNewsRequest(userMessage) {\n    const newsKeywords = ['latest news', 'current news', 'recent news', 'news about', 'news on', 'what\\'s happening', 'breaking news', 'today\\'s news'];\n    const isNewsRequest = newsKeywords.some(keyword => userMessage.toLowerCase().includes(keyword));\n    if (isNewsRequest) {\n      let searchTerm = userMessage;\n      newsKeywords.forEach(keyword => {\n        searchTerm = searchTerm.replace(new RegExp(keyword, 'gi'), '').trim();\n      });\n      if (searchTerm === '') {\n        searchTerm = 'latest';\n      }\n      const articles = await newsService.searchNews(searchTerm);\n      return newsService.formatNewsForChat(articles);\n    }\n    return null;\n  }\n  cleanSearchQuery(query) {\n    return query.replace(/^(what is|who is|where is|when is|why is|how is|can you|could you|tell me|explain|define|meaning of|information about|facts about|details about)/i, '').replace(/\\?$/g, '').trim();\n  }\n  getMockWorkoutPlan() {\n    return `Here's your personalized 4-day workout plan:\n    \n**Day 1: Chest & Triceps**\n• Bench Press: 3 sets x 8-12 reps\n• Incline Dumbbell Press: 3 sets x 10-12 reps\n• Tricep Dips: 3 sets x 10-15 reps\n• Cable Flyes: 3 sets x 12-15 reps\n\n**Day 2: Back & Biceps**\n• Pull-ups: 3 sets x 8-12 reps\n• Bent-over Rows: 3 sets x 10-12 reps\n• Barbell Curls: 3 sets x 10-12 reps\n• Lat Pulldowns: 3 sets x 12-15 reps\n\n**Day 3: Legs & Shoulders**\n• Squats: 3 sets x 8-12 reps\n• Deadlifts: 3 sets x 6-10 reps\n• Military Press: 3 sets x 8-12 reps\n• Leg Curls: 3 sets x 10-15 reps\n\n**Day 4: Core & Cardio**\n• Plank: 3 sets x 30-60 seconds\n• Russian Twists: 3 sets x 20 reps\n• 30-minute moderate cardio session\n• Stretching routine: 15 minutes`;\n  }\n  getMockResponse(userMessage, windowTitle, conversationHistory) {\n    // Simple mock responses based on context\n    const responses = [`I understand you're asking about \"${userMessage}\" in the context of ${windowTitle}. How can I help you further with this topic?`, `That's an interesting point about \"${userMessage}\". In the context of ${windowTitle}, what specific information are you looking for?`, `Regarding \"${userMessage}\" in your ${windowTitle} context, I can provide more details if you'd like. What aspect interests you most?`, `I've processed your query about \"${userMessage}\" in ${windowTitle}. Would you like me to elaborate on any particular aspect?`, `Thanks for sharing that about \"${userMessage}\" in your ${windowTitle} workspace. How else can I assist you today?`];\n    return responses[Math.floor(Math.random() * responses.length)];\n  }\n  async handleSpecialAction(action, windowData) {\n    try {\n      switch (action) {\n        case 'fetchNews':\n          const articles = await newsService.getTopHeadlines(windowData.newsTopic || 'technology');\n          return newsService.formatNewsForChat(articles);\n        case 'generatePlan':\n          return this.getMockWorkoutPlan();\n        case 'toggleNotify':\n          return \"Price change notifications setting has been updated successfully!\";\n        default:\n          return \"Action completed successfully!\";\n      }\n    } catch (error) {\n      return `Sorry, I encountered an error processing your request: ${error.message}`;\n    }\n  }\n}\nexport default new AIService();","map":{"version":3,"names":["newsService","webSearchService","AIService","processUserMessage","userMessage","windowData","conversationHistory","searchResult","handleAutomaticSearch","newsResult","handleNewsRequest","id","toLowerCase","includes","articles","getTopHeadlines","newsTopic","formatNewsForChat","searchNews","getMockWorkoutPlan","getMockResponse","title","error","console","message","questionPatterns","isQuestion","some","pattern","test","cleanQuery","cleanSearchQuery","results","search","formatSearchResults","newsKeywords","isNewsRequest","keyword","searchTerm","forEach","replace","RegExp","trim","query","windowTitle","responses","Math","floor","random","length","handleSpecialAction","action"],"sources":["C:/Users/Click/desktop/smartchat-dashboard/src/utils/aiService.js"],"sourcesContent":["import newsService from './newsService';\r\nimport webSearchService from './webSearch';\r\n\r\nclass AIService {\r\n  async processUserMessage(userMessage, windowData, conversationHistory = []) {\r\n    try {\r\n      // Handle automatic web search for questions\r\n      const searchResult = await this.handleAutomaticSearch(userMessage);\r\n      if (searchResult) {\r\n        return searchResult;\r\n      }\r\n\r\n      // Handle news requests\r\n      const newsResult = await this.handleNewsRequest(userMessage);\r\n      if (newsResult) {\r\n        return newsResult;\r\n      }\r\n\r\n      // Handle special window types\r\n      if (windowData.id === 'news') {\r\n        if (userMessage.toLowerCase().includes('latest') || \r\n            userMessage.toLowerCase().includes('news') ||\r\n            userMessage.toLowerCase().includes('today') ||\r\n            userMessage.toLowerCase().includes('headlines')) {\r\n          const articles = await newsService.getTopHeadlines(windowData.newsTopic || 'technology');\r\n          return newsService.formatNewsForChat(articles);\r\n        } else {\r\n          const articles = await newsService.searchNews(userMessage);\r\n          return newsService.formatNewsForChat(articles);\r\n        }\r\n      }\r\n\r\n      if (windowData.id === 'workout') {\r\n        if (userMessage.toLowerCase().includes('plan') || \r\n            userMessage.toLowerCase().includes('generate')) {\r\n          return this.getMockWorkoutPlan();\r\n        }\r\n      }\r\n\r\n      // For other messages, return a mock response (since we don't have Hugging Face key)\r\n      return this.getMockResponse(userMessage, windowData.title, conversationHistory);\r\n    } catch (error) {\r\n      console.error('AI Service Error:', error);\r\n      return `Sorry, I encountered an error: ${error.message}. Please try rephrasing your question.`;\r\n    }\r\n  }\r\n\r\n  async handleAutomaticSearch(userMessage) {\r\n    // Detect questions that likely need web search\r\n    const questionPatterns = [\r\n      /^(what|who|where|when|why|how|which|can you|could you|tell me about|explain|define|meaning of)/i,\r\n      /(latest|recent|current|today's|breaking|price of|cost of|population of|statistics)/i\r\n    ];\r\n\r\n    const isQuestion = questionPatterns.some(pattern => pattern.test(userMessage));\r\n    \r\n    if (isQuestion) {\r\n      const cleanQuery = this.cleanSearchQuery(userMessage);\r\n      const results = await webSearchService.search(cleanQuery);\r\n      return webSearchService.formatSearchResults(results);\r\n    }\r\n    \r\n    return null;\r\n  }\r\n\r\n  async handleNewsRequest(userMessage) {\r\n    const newsKeywords = [\r\n      'latest news', 'current news', 'recent news', \r\n      'news about', 'news on', 'what\\'s happening',\r\n      'breaking news', 'today\\'s news'\r\n    ];\r\n    \r\n    const isNewsRequest = newsKeywords.some(keyword => \r\n      userMessage.toLowerCase().includes(keyword)\r\n    );\r\n    \r\n    if (isNewsRequest) {\r\n      let searchTerm = userMessage;\r\n      newsKeywords.forEach(keyword => {\r\n        searchTerm = searchTerm.replace(new RegExp(keyword, 'gi'), '').trim();\r\n      });\r\n      \r\n      if (searchTerm === '') {\r\n        searchTerm = 'latest';\r\n      }\r\n      \r\n      const articles = await newsService.searchNews(searchTerm);\r\n      return newsService.formatNewsForChat(articles);\r\n    }\r\n    \r\n    return null;\r\n  }\r\n\r\n  cleanSearchQuery(query) {\r\n    return query\r\n      .replace(/^(what is|who is|where is|when is|why is|how is|can you|could you|tell me|explain|define|meaning of|information about|facts about|details about)/i, '')\r\n      .replace(/\\?$/g, '')\r\n      .trim();\r\n  }\r\n\r\n  getMockWorkoutPlan() {\r\n    return `Here's your personalized 4-day workout plan:\r\n    \r\n**Day 1: Chest & Triceps**\r\n• Bench Press: 3 sets x 8-12 reps\r\n• Incline Dumbbell Press: 3 sets x 10-12 reps\r\n• Tricep Dips: 3 sets x 10-15 reps\r\n• Cable Flyes: 3 sets x 12-15 reps\r\n\r\n**Day 2: Back & Biceps**\r\n• Pull-ups: 3 sets x 8-12 reps\r\n• Bent-over Rows: 3 sets x 10-12 reps\r\n• Barbell Curls: 3 sets x 10-12 reps\r\n• Lat Pulldowns: 3 sets x 12-15 reps\r\n\r\n**Day 3: Legs & Shoulders**\r\n• Squats: 3 sets x 8-12 reps\r\n• Deadlifts: 3 sets x 6-10 reps\r\n• Military Press: 3 sets x 8-12 reps\r\n• Leg Curls: 3 sets x 10-15 reps\r\n\r\n**Day 4: Core & Cardio**\r\n• Plank: 3 sets x 30-60 seconds\r\n• Russian Twists: 3 sets x 20 reps\r\n• 30-minute moderate cardio session\r\n• Stretching routine: 15 minutes`;\r\n  }\r\n\r\n  getMockResponse(userMessage, windowTitle, conversationHistory) {\r\n    // Simple mock responses based on context\r\n    const responses = [\r\n      `I understand you're asking about \"${userMessage}\" in the context of ${windowTitle}. How can I help you further with this topic?`,\r\n      `That's an interesting point about \"${userMessage}\". In the context of ${windowTitle}, what specific information are you looking for?`,\r\n      `Regarding \"${userMessage}\" in your ${windowTitle} context, I can provide more details if you'd like. What aspect interests you most?`,\r\n      `I've processed your query about \"${userMessage}\" in ${windowTitle}. Would you like me to elaborate on any particular aspect?`,\r\n      `Thanks for sharing that about \"${userMessage}\" in your ${windowTitle} workspace. How else can I assist you today?`\r\n    ];\r\n    \r\n    return responses[Math.floor(Math.random() * responses.length)];\r\n  }\r\n\r\n  async handleSpecialAction(action, windowData) {\r\n    try {\r\n      switch (action) {\r\n        case 'fetchNews':\r\n          const articles = await newsService.getTopHeadlines(windowData.newsTopic || 'technology');\r\n          return newsService.formatNewsForChat(articles);\r\n          \r\n        case 'generatePlan':\r\n          return this.getMockWorkoutPlan();\r\n          \r\n        case 'toggleNotify':\r\n          return \"Price change notifications setting has been updated successfully!\";\r\n          \r\n        default:\r\n          return \"Action completed successfully!\";\r\n      }\r\n    } catch (error) {\r\n      return `Sorry, I encountered an error processing your request: ${error.message}`;\r\n    }\r\n  }\r\n}\r\n\r\nexport default new AIService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}